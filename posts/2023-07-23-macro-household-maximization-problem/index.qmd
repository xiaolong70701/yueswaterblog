---
title: "總體經濟學中消費者的最適選擇"
image: macro preview.png
lang: en
description: |
    消費者追求最佳經濟決策與總體經濟學之關聯。
date: "2023-07-23"
draft: FALSE
citation:
  url: https://yueswater-blog.netlify.app/posts/2023-07-23-macro-household-maximization-problem/
categories: [macroeconomics]
---

在[衡量經濟表現](https://yueswater-blog.netlify.app/posts/2023-07-22-macro-economy-performance/)中提到了如何衡量一國的經濟表現，且我們知道這些指標都是經濟體系中行為者決策的加總。因此，在更深入討論總體經濟理論前，首先我們要從個體的角度出發，探討個體如何在經濟體系中根據其背後的偏好邏輯作出決策。

消費者行為是日常生活中各式各樣的決策。以飲食為例，消費者可以選擇自己在家煮飯或去餐廳用餐。這些決策涉及到食材的健康、餐廳的清潔以及時間等不同的取捨和考量。因此，消費者行為是探討消費者的偏好、面臨的限制條件，以及最適決策的特性，從而刻畫消費行為的研究途徑。

## 偏好(Preference)

所謂偏好，即是消費者對任意兩組商品所做的排序，消費者可以明確指出他到底比較喜歡哪⼀組。給定 $x$ 與 $y$ 兩種商品，我們可以透過數學符號來描述兩者的關係。如 $x \succsim y$，隱含了

- $x$ 比 $y$ 好，或

- $x$ 與 $y$ 一樣好

透過數學符號我們可以簡化文字，且得以更清楚表達不同商品之間的偏好關係。注意到上面的關係為非嚴格偏好(non-strict preference)，若要表達嚴格偏好(strict preference)，我們用 $x \succ y$ 表達，其表達的意思包含 $x \succsim y$ 成立，但 $y \succsim x$ 不成立。此外，我們以 $x \sim y$ 表達兩個商品之間對於個體的偏好是相同的，稱之為無異(indifferent)。

必須提醒的是，上述的「商品」並不一定僅限於零售店、量販店架上會出現的商品，只要任何可以透過選擇來描述的場域，基本上都適用於上述的分析。例如候選人、期末考前讀書分配、該上哪一所大學等。

### 偏好的假設

在消費者偏好的假設中，有以下幾個重要特性：

1. 完整性(completeness)：對於消費者在商品空間中的任意兩點（商品組合），消費者可以進行比較，即能夠判斷兩個商品組合哪個更好，或者至少有一個是他們能夠接受的，即下方三個關係有一個會成立：
$$
x \succsim y \quad x \sim y \quad y \succsim x
$$

2. 遞移性(transitivity)：如果消費者認為商品組合 $x$ 比商品組合 $y$ 更好，且商品組合 $y$ 比商品組合 $z$ 更好，則消費者也會認為商品組合 $x$ 比商品組合 $z$ 更好，即
$$
x \succsim y, \;y \succsim z, \Rightarrow x \succsim z
$$

3. 反身性(reflexivity)：消費者會接受自己已經擁有的商品組合，即商品組合 $x$ 至少和它自己一樣好，即
$$
x \succsim x, \forall x
$$

### 偏好的特性

偏好的特性有以下兩個：

1. 單調遞增性(strong monotonicity)：商品對於消費者而言愈多愈好。也就是說，如果一個商品組合中包含了更多的商品，消費者會覺得這個商品組合更好，不會對此產生厭惡或拒絕。在無窮的欲望空間中，並不存在消費者滿足所有欲望的最大點，因此沒有所謂的「垃圾」。

2. 凸性偏好(convexity)：如果兩個商品組合都是消費者喜歡的，那麼這兩個商品組合的混合物（線性組合）也是消費者喜歡的。具體來說，如果商品組合 $x$ 和商品組合 $y$ 都被消費者喜歡，即 $x \succsim z$，且 $y \succsim z$，那麼在這兩個商品組合之間進行混合：
$$
tx + (1−t)y \succsim z, \; t \in [0, 1]
$$
其所產生的商品組合 $z$ 也會被消費者喜歡。

這些偏好的特性是經濟學中用來描述消費者對於不同商品組合的喜好和選擇行為的重要工具。它們有助於理解消費者行為的決策過程和消費行為的變化。

## 效用函數(Utility Function)

效用函數是一個將不同種商品組合對應到不同數值的函數。它刻畫了一個消費者對商品的偏好(preference)。如果在商品空間中有無窮但可數個商品組合，並且偏好滿足上述假設：完整性、遞移性、反身性等特性，那麼我們可以確保刻畫消費者偏好的效用函數存在。

### 基數性(Cardinality)

如果一個效用函數刻畫出某一個消費者的偏好，則無論進行何種單調轉換，仍然可以刻劃出這個消費者的偏好。

單調轉換函數是指一種保持單調性（喜好順序不變）的函數。如果效用函數 $u(x)$ 對於商品 $x$ 的偏好程度大於對商品 $y$ 的偏好程度，即
$$
u(x) > u(y)
$$

那麼對 $u(x)$ 進行單調轉換後，其大小關係仍相同，即
$$
f(u(x)) > f(u(y))
$$

由於偏好只有排列次序而沒有排列大小，消費者只在意商品 $x$ 相對於 $y$ 的偏好，而不在意具體數值的大小。因此，進行單調轉換，例如 $f(x) = x + 2$ 或 $f(x) = 2x$，不會改變消費者的偏好，只會保持相對偏好的順序。

### 效用函數

效用函數遵循幾個基本特性：

- 遞移性：如果消費者對商品組合 $x$ 的喜好程度優於商品組合 $y$，即
$$
u(x) > u(y)
$$
同時商品組合 $y$ 的喜好又優於商品組合 $z$，即
$$
u(y) > u(z)
$$
那麼消費者對商品組合 $x$ 的喜好必定優於商品組合z，即 $x \succ z$。

- 反身性：消費者對於任何商品組合都至少和它自己一樣喜好，即
$$
u(x) \geq u(x)
$$

- 凸性偏好：。如果商品組合 $x$ 和商品組合 $y$ 都是消費者喜歡的，那麼在這兩個商品組合之間進行混合，即
$$
tx + (1-t)y, \; t \in [0,1]
$$
產生的商品組合 $tx + (1-t)y$ 也是消費者喜歡的，即
$$
u(tx + (1-t)y) > u(z)
$$

### 邊際效用(Marginal Utility)

邊際效用是經濟學中的重要概念，用來衡量消費者對於特定商品的額外滿足程度。考慮兩種商品，蔬菜 $x_{1}$ 和肉品 $x_{2}$，邊際效用表示當蔬菜或肉品的消費量固定時，增加一單位的另一種商品消費量所帶來的效用變化。

例如，消費者在某一時刻消費了 $x_{2}$ 單位的肉品，邊際效用為
$$
\text{MU}_{2} = \frac{\Delta u}{\Delta x_{2}}
$$

表示增加肉品消費量 $x_{2}$ 單位後，整體效用的變化。

值得注意的是，邊際效用會隨著消費量的增加而遞減。這意味著隨著消費量的增加，每增加一單位的商品消費量所帶來的額外滿足程度逐漸減少。這是因為消費者在滿足基本需求後，對於同一種商品的追求會逐漸減弱，導致邊際效用逐漸降低。

### 無異曲線(Indifference Curve)

無異曲線又稱為等效用曲線，其是在消費者效用函數中，表示消費者在不同商品組合下，獲得相同滿足程度（效用）的點所形成的曲線。換句話說，無異曲線上的每個點都代表消費者在不同商品組合下所獲得的相同效用值。

我們可以用 `Python` 繪製無異曲線。假設效用函數為 Cobb-Douglas，即
$$
u(x,y) = x^{\alpha}y^{1-\alpha}
$$
並給定 $\alpha = 0.5$。使用 `numpy` 與 `matplotlib` 即可繪製：

```{python, echo=FALSE, fig.align="center"}
import numpy as np
import matplotlib.pyplot as plt

# 定義效用函數
def utility(x, y, alpha):
    return x**alpha * y**(1-alpha)

# 創建網格
x = np.linspace(1, 10, 100)
y = np.linspace(1, 10, 100)
X, Y = np.meshgrid(x, y)

# 設定alpha的值
alpha = 0.5

# 計算對應效用值
Z = utility(X, Y, alpha)

# 繪製無異曲線
plt.contour(X, Y, Z, levels=np.linspace(np.min(Z), np.max(Z), 10), cmap='viridis')
plt.xlabel('x')
plt.ylabel('y')

# 顯示圖形
plt.show()
```

而無異曲線具有以下特性：

1. 向下傾斜(downward sloping)：無異曲線通常向下傾斜，這意味著消費者在不增加總消費成本的情況下，可以通過增加其中一種商品的消費量來補償另一種商品消費量的減少。

2. 非交叉：無異曲線不會交叉，也就是說不會有兩條無異曲線交叉的情況，因為每條曲線代表不同的效用水準。

3. 凸向原點：無異曲線通常凸向原點，這是因為邊際替代效應。隨著消費者增加一種商品的消費量，其邊際效用遞減，因此消費者更願意將更多商品投入到邊際效用較高的商品中。在同⼀無異曲線上，隨著的增加，要求消費者以「減少、增加」的⽅式去維持相同的效⽤⽔準，其與的替換比將隨著的增加愈來愈⼩，亦即邊際替代率是遞減的。

4. 多多益善：隨著效用水平的提高，無異曲線向外擴展，表示消費者更滿足於得到更多的商品。

無異曲線有另一個重要的概念，稱之為邊際替代率(marginal substitution rate, MRS)，其用於衡量消費者在不同商品之間進行替代時的比率。在無異曲線上的任一點，切線的斜率絕對值即為該點的邊際替代率。表示為：

$$
\text{MRS} = \left\lvert \frac{\Delta x_2}{\Delta x_1} \right\rvert = \left\lvert \frac{MU_1}{MU_2} \right\rvert
$$
其中，$MU_{1}$ 和 $MU_{2}$ 分別代表消費者對於商品 $1$ 和商品 $2$ 的邊際效用，而 $\Delta x_{1}$ 和 $\Delta x_{2}$ 則是對應的消費量變化。邊際替代率表示為正值時，表示消費者願意放棄較多的商品 $2$ 以獲得更多的商品 $1$；反之，表示消費者願意放棄較多的商品 $1$ 以獲得更多的商品 $2$。

而邊際替代率遞減法則則反映了一種「非極端」的偏好。當消費者已經擁有許多的某種商品時，他們對該商品的需求會較不希罕，邊際替代率較低。但對於消費量較少的商品，消費者願意花較大的代價去取得，邊際替代率較高。這一法則幫助我們理解消費者在購買不同商品時的行為，並在經濟學中有重要應用。

## 預算限制(Budget Constraint)

預算限制是指消費者在給定的收入和商品價格下，可以購買的商品組合範圍。假設第一種商品的價格為 $p_1$，第二種商品的價格為 $p_2$。若消費者購買 $x_1$ 個單位的第一種商品和 $x_2$ 個單位的第二種商品，其總支出為 $p_1x_1 + p_2x_2$。若消費者的收入為 $I$，其預算限制可表達為 $p_1x_1 + p_2x_2 \leq I$。預算限制線的斜率的絕對值是 $p_1/p_2$，代表的是兩個商品的相對價格比。

在預算限制下，消費者只能購買預算限制線上或位於預算限制線以下的商品組合。預算限制線上的商品組合是消費者所能購買的最大數量的商品組合，而位於預算限制線以下的商品組合則表示超出了消費者的收入能力。因此，預算限制線是預算限制消費者購買商品的界限。消費者可以在預算限制線上做出最優的購買決策，以最大化其效用滿足。

### 價格變動(Change in Price)

價格變動對於預算限制式的影響是指當商品的價格發生變化時，消費者所能夠購買的商品組合範圍也會相應地變化。以商品價格上升為例，預算限制式的斜率會隨之改變。假設有兩種商品 $x$ 和 $y$，其價格分別為 $p_{x}$ 和 $p_{y}$。原本的預算限制式為
$$
p_{x}x + p_{y}y = I
$$
其中 $I$ 表示消費者的收入。當 $p_{x}$ 或 $p_{y}$ 其中一種商品的價格上升時，預算限制式的斜率也會相應增加。這意味著消費者所能夠購買的商品組合將會受到影響。預算限制線會向內縮小，其隱含了消費者在新的價格條件下將能夠購買的商品組合範圍會變小。因此，價格變動對預算限制式的影響是使消費者在新的價格條件下重新調整其購買決策。商品價格的變動會影響消費者對不同商品的購買選擇，進而影響其能夠購買的商品組合範圍。

假設 $p_{x} = 1$，$p_{y} = 2$，$I = 30$，若出現一個經濟事件，導致 $p_{x}$ 上升為 $2$，我們用 `Python` 繪製預算限制式的變化：

```{python}
from sympy import *
import numpy as np
import matplotlib.pyplot as plt

# 設定數值
px1 = 1
py1 = 2
px2 = 2
I = 30
a = 0.5

# 清除當前圖片
plt.clf()

# 設定圖片寬度
plt.xlim(0, (I/px1) * 1.2)
plt.ylim(0, (I/py1) * 1.2)

# 建立圖片
z1 = np.linspace(0, (I/px1), 200).reshape(-1, 1)
z2 = -px1/py1 * z1 + (I/py1)
z3 = np.linspace(0, (I/px2), 200).reshape(-1, 1)

# 設定圖例
plt.plot(z1, z2,
         label=r'$x + 2y = 30$',
         color='Black')
plt.plot(z3, z2,
         label=r'$2x + 2y = 30$',
         color='Lightgray')
plt.legend(loc='upper right')

# 加入 annotation curve
x_values = [14, 18.5]
y_values = [2, 5]
plt.annotate('',
             xy=(x_values[0], y_values[0]),  # 起始點
             xytext=(x_values[1], y_values[1]),  # 終點
             arrowprops=dict(arrowstyle='->',
                             connectionstyle="arc3,rad=-0.2",
                             color='red'),  # 設定箭頭的樣式和顏色
             )

# 顯示圖片
ax = plt.subplot(111)
ax.spines[['right', 'top']].set_visible(False)  # 移除上邊界與右邊界
plt.legend(frameon=False)  # 移除圖例邊界
plt.show()
```

### 所得變化(Change in Income)

所得變動對預算限制式的影響是指當消費者的收入發生改變時，其所能購買的商品組合範圍也會隨之改變。預算限制式是描述在給定一定收入和商品價格下，消費者可以購買的商品組合的數學表達式，通常以方程式的形式呈現，例如：

$$
p_x \cdot x + p_y \cdot y = I
$$

當消費者的收入發生變動時，預算限制式會隨之改變，進而影響消費者所能選擇的商品組合。如果收入增加，這意味著消費者有更多的購買力，可以購買更多的商品。預算限制式的斜率則不變，表示兩種商品的價格比例保持不變，使得預算限制線整體向右上方平行移動；反之，如果收入減少，消費者的購買力減弱，只能購買較少的商品，預算限制線整體向左下方平行移動。

我們延續上述的假設，並假定 $I$ 從 $30$ 上升到 $50$。我們仍然用 `Python` 描述所得變動：

```{python}
from sympy import *
import numpy as np
import matplotlib.pyplot as plt

# 設定數值
px = 1
py = 2
I1 = 30
I2 = 50
a = 0.5

# 清除當前圖片
plt.clf()

# 設定圖片寬度
plt.xlim(0, (I2/px) * 1.2)
plt.ylim(0, (I2/py) * 1.2)

# 建立圖片
z1 = np.linspace(0, (I1/px), 200).reshape(-1, 1)
z2 = -px/py * z1 + (I1/py)
z3 = np.linspace(0, (I2/px), 200).reshape(-1, 1)
z4 = -px/py * z3 + (I2/py)

# 設定圖例
plt.plot(z1, z2,
         label=r'$x + 2y = 30$',
         color='Black')
plt.plot(z3, z4,
         label=r'$x + 2y = 50$',
         color='Lightgray')
plt.legend(loc='upper right')

# 加入 annotation curve
x_values = [20, 15]
y_values = [14.5, 8.5]
plt.annotate('',
             xy=(x_values[0], y_values[0]),  # 起始點
             xytext=(x_values[1], y_values[1]),  # 終點
             arrowprops=dict(arrowstyle='->',
                             color='red'),  # 設定箭頭的樣式和顏色
             )

# 顯示圖片
ax = plt.subplot(111)
ax.spines[['right', 'top']].set_visible(False)  # 移除上邊界與右邊界
plt.legend(frameon=False)  # 移除圖例邊界
plt.show()
```

### 消費者最適選擇(Consumer's Optimal Choice)

在可負擔得起的商品組合中，消費者希望找到能使其效用最大化的點，也就是我們常聽到的「資源有限，慾望無窮」。在預算限制下，消費者面臨著一個效用最大化的問題，即追求在預算限制內，選擇一個使得其效用最大的商品組合。

假設消費者的效用水準超出了其預算限制，表示該消費者無法負擔得起這個效用水準，因為超出了其收入範圍。而效用水準D對應的商品組合雖然可負擔得起，但效用不夠高，尚未達到最大化效用的程度。

因此，消費者會選擇落在預算限制內的可負擔得起的商品組合，並根據無異曲線來做出最佳選擇。無異曲線是表示在不同效用水準下消費者所選擇的商品組合的曲線。消費者會不斷地從無異曲線上不斷往右上方推進，直到無異曲線與預算限制線相切為止。

當無異曲線與預算限制線相切時，這個點即為消費者效用最大化的點。在這個點上，消費者所能購買的商品組合既在預算限制內，又使得效用達到最大化，因此這是消費者最理想的選擇。這個點的坐標即為消費者在預算限制下選擇的最佳商品組合。

我們可以用 `Python` 來繪製消費者最適選擇[^1]。

[^1]:程式碼參考並改編自[python与微观经济学，效用最大化、支出最小化和斯勒茨基替代效应](https://zhuanlan.zhihu.com/p/436449335)。

```{python, fig.align="center"}
from sympy import *
import numpy as np
import matplotlib.pyplot as plt

# 設定數值
p1 = 1
p2 = 2
I = 30
a = 0.5
x1,x2,k = symbols('x1,x2,k')

# 建立效用函數
f = (x1**(a))*(x2**(1-a))
# 建立預算限制式
g = p1*x1 + p2*x2 - I
# 建立 Lagragian equation
L = f-k*g
# 求導
dx1 = diff(L, x1)
dx2 = diff(L,x2)
dk = diff(L,k)

# 求解
m = solve([dx1,dx2,dk],[x1,x2,k])   
x1 = m[0][0]
x2 = m[0][1]
k = m[0][2]
f2 = (x1**(a))*(x2**(1-a))

# 繪圖
plt.clf() # 清除先前的圖片

# 設定 x, y 軸
plt.xlabel(r"$x_{1}$",fontsize=10)
plt.ylabel(r"$x_{2}$",fontsize=10)

# 設定圖片寬度
plt.xlim(0,(I/p1)*1.2)
plt.ylim(0,(I/p2)*1.2)

# 建立圖片
z1=np.linspace(0,(I/p1),200).reshape(-1,1) 
z2=-p1/p2*z1+(I/p2)
z3=np.linspace(0.1,(I/p1),200).reshape(-1,1) 
z4=(f2/z3**a)**(1/(1-a))

# 標註文字
plt.annotate(r'$\frac{I}{p_{x}}$', 
             xy = (30, 0), 
             xytext=(30, 1),
             fontsize = 12)
plt.annotate(r'$\frac{I}{p_{y}}$', 
             xy = (0, 15), 
             xytext=(1, 16),
             fontsize = 12)
plt.annotate('Optimal solution', 
             xy = (15, 7.5), 
             xytext=(15.5, 8),
             fontsize = 9)

# 設定圖例
plt.plot(z1,z2,
         label = 'Budget Constraint',
         color = 'Black')
plt.plot(z3,z4,
         label = 'Utility Function',
         color = 'Gray')
plt.legend(loc='upper right')

# 建立最適點
plt.scatter(x1,x2, color = "red")

# 顯示圖片
ax = plt.subplot(111)
ax.spines[['right', 'top']].set_visible(False) # 移除上邊界與右邊界
plt.legend(frameon=False) # 移除圖例邊界
plt.show()
```

對於「消費者的最適選擇發⽣在無異曲線與預算線相切之處」直觀一點的解釋是，由於邊際替代率等於相對價格比，其為消費者對與的主觀取捨，而價格比則是市場上對與的客觀評價，因此消費者的最適選擇便是主觀取捨與市場上的客觀評價相⼀致之結果。

數學上我們稱消費者的最適選擇為一個最適化問題(optimization problem)，一般來說我們多用 Lagragian equation 作為計算途徑。我們的極大化問題可以寫成以下的形式：

$$
\begin{aligned}
\max_{x_{1}, \cdots, x_{n}}& \; U(x_{1}, \cdots, x_{n})\\
\operatorname{s.t. }&\; p_{1}x_{1} + \cdots + p_{n}x_{n} \leq I
\end{aligned}
$$
其中$p_{k}$代表商品$k$的價格，$I$代表消費者的收入，都以元或某種計價單位表示。Lagragian multiplier[^2]：

[^2]:Lagragian multiplier 僅適用於內部解。

$$
\mathscr{L} = U(x_{1}, x_{2}, \cdots, x_{n}) + \lambda(I - p_{1}x_{1} - p_{2}x_{2} - \cdots - p_{n}x_{n})
$$

這個內部最大值的標準一階條件為：

$$
\begin{aligned}
& \frac{\partial \mathscr{L}}{\partial x_{k}} = \frac{\partial U}{\partial x_{k}} - \lambda p_{k} \overset{*}{=} 0, \; \forall k\\
& \frac{\partial \mathscr{L}}{\partial \lambda} = I - p_{1}x_{1} - p_{2}x_{2} - \cdots - p_{n}x_{n} \overset{*}{=} 0
\end{aligned}
$$
請注意，$\lambda$可以解釋為收入邊際效用，並且必為正。一階條件意味著
$$
\frac{MU_{i}}{MU_{j}} = \operatorname{MRS} = \frac{p_{i}}{p_{j}}
$$
這個方程背後的直觀解釋即是上述所述，消費者將心理上的折衷率等同於市場的相對價格。

